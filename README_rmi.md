# accel-align-rmi

A version of [Accel-Align](https://github.com/raja-appuswamy/accel-align-release) using the RMI index.


## Clone
The repository can be cloned by running the following command:
```
git clone --recursive https://github.com/IlariaPilo/accel-align-rmi
```

## Docker folder
To run the program inside a container, run the following commands:
```
cd docker
bash build.sh
bash run.sh <data_directory>
```
where _data_directory_ is the directory storing the reference string (and the results).

The generated credentials are (with `sudo` permissions):
```
USER: aligner
PASSWORD: password
```

## Download a reference string
The script `/data/download.sh` can be used to download and post-process a reference string. The downloaded string is called `hg37.fna`, and it is saved in the current working directory.

## Build the index
The index can be built by simply running:
```
bash index.sh <reference_string.fna>
```

## Utility folder
The `utility` folder contains some useful helper scripts.

### binary_print.py
This script can be used to take a look inside the keys_uint32 or pos_uint32 binary files.
More in general, it can print whatever binary file having the structure:

\<number of entries> (uint64) <br>
\<list of keys> (uint32 each) 

Usage
```
    python3 binary_print.py <filename> [<direction>] [<number_of_entries>]
Prints the entries of <filename> file.
If <number_of_entries> is not specified, 10 entries are displayed.
If <direction> is 'forward' or not provided, it reads from the beginning of the file.
If <direction> is 'backward', it reads from the end of the file.
```
### key_2_string.py
This script takes a uint32 key and recovers the 16-char long kmer that generated it.

Usage
```
    python3 key_2_string.py <key>
Takes the key and converts it into a kmer, assuming its length is 16.
```

### search_key.py
This script searches if a given key is present in a file. It is supposed to be used only on keys_uint32 files (that is, key files generated by index.sh).

Usage
```
    python search_key.py <filename> <key>
Search the key in <filename> file.
Passing 'min' as key returns the minimum, passing 'max' the maximum.
```